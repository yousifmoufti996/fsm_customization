<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Inherit Contact form view to add area fields -->
    <record id="view_partner_form_area_fields" model="ir.ui.view">
        <field name="name">res.partner.form.area.fields</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">

            <!-- Add these to hide the old fields -->
            <xpath expr="//field[@name='nearest_point']" position="replace"/>
            <xpath expr="//field[@name='longitude_coordinates']" position="replace"/>
            <xpath expr="//field[@name='latitude_coordinates']" position="replace"/>
            <xpath expr="//field[@name='full_name_and_surname']" position="replace"/>
            <xpath expr="//field[@name='first_phone_number']" position="replace"/>
            <xpath expr="//field[@name='second_phone_number']" position="replace"/>
            <xpath expr="//field[@name='email1']" position="replace"/>
            <xpath expr="//field[@name='subscription_type']" position="replace"/>
            <field name="voucher_number" invisible='1' />  
             
            <!-- <xpath expr="//field[@name='email']" position="replace"/> -->
            
            <xpath expr="//sheet/group/group/field[@name='email']" position="replace"/>




            <!-- Hide these fields from the old tab (we'll move them to new locations) -->
            <xpath expr="//field[@name='menu_type_ids']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='title']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
            <xpath expr="//field[@name='local_number']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='local_number_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
            <xpath expr="//field[@name='user_name']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
            <xpath expr="//field[@name='Cabin']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='pole']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='voucher_number']" position="after">
               <field name="email" />
            </xpath>
            <xpath expr="//field[@name='subscription_type_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='menu_type_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <!-- Hide original email, website, tags, vat to move them later -->
            
            <xpath expr="//label[@for='email']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='email']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
       

            <xpath expr="//field[@name='website']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='category_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='vat']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
          

        
         
            <!-- Add service details to main area before notebook -->
            <xpath expr="//notebook" position="before"> 
                <group invisible="1">
                    <field name="area_name"/>
                    <field name="area_number"/>
                    <field name="zip"/>
                </group>
                
          
            
            </xpath>

            <!-- Change labels of standard fields to match Arabic names -->

            <!-- Replace street with area name dropdown -->
            <xpath expr="//field[@name='street']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='street']" position="after">
                <field name="area_name_id" string="ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©"  placeholder="ÿßÿÆÿ™ÿ± ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©..."
                    options="{'no_create': True, 'no_create_edit': True}"/>
            </xpath>
          
            <xpath expr="//field[@name='street2']" position="attributes">
                <attribute name="placeholder">ÿßŸÇÿ±ÿ® ŸÜŸÇÿ∑ÿ© ÿØÿßŸÑÿ©</attribute>
            </xpath>
            
           <!-- Replace zip with area number dropdown -->
            <xpath expr="//field[@name='zip']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <!-- <xpath expr="//field[@name='email']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->

            <xpath expr="//field[@name='zip']" position="after">
            
                <field name="area_number_id" string="ÿ±ŸÇŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©"
                    placeholder="ÿßÿÆÿ™ÿ± ÿ±ŸÇŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©..."
                    domain="[('area_name_id', '=', area_name_id)]"
                    options="{'no_create': True, 'no_create_edit': True}"/>
                    <!-- <label for="menu_type_ids" string="ŸÖÿ¨ŸÖŸàÿπ ÿπŸÖŸÑÿßÿ° ŸÅÿ±ÿπŸäÿ©"/> -->

                    <field name="menu_type_ids"  widget="many2many_tags" readonly="0" placeholder="ŸÖÿ¨ŸÖŸàÿπ ÿπŸÖŸÑÿßÿ° ŸÅÿ±ÿπŸäÿ©..."/>
                    <!-- <field name="menu_type_ids"  widget="many2many" readonly="0" placeholder="ŸÖÿ¨ŸÖŸàÿπ ÿπŸÖŸÑÿßÿ° ŸÅÿ±ÿπŸäÿ©..."/> -->


            </xpath>
            <xpath expr="//div[@class='o_row o_row_readonly'][field[@name='mobile']]" position="after">
                <label for="family_number" class="oe_inline"/>
                <div class="o_row o_row_readonly">
                    <field name="family_number" string="ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿπÿßÿ¶ŸÑŸä" readonly="0" />
                </div>
            </xpath>

            <xpath expr="//div[@class='o_row o_row_readonly'][field[@name='family_number']]" position="after">
                <label for="category_id" class="oe_inline"/>
                <div class="o_row o_row_readonly">
                    <field name="category_id" string="ŸÜŸàÿπ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ" widget="many2many_tags"/>
                </div>
            </xpath>

            <xpath expr="//div[@class='o_row o_row_readonly'][field[@name='category_id']]" position="after">
                <label for="ref" class="oe_inline"/>
                <div class="o_row o_row_readonly">
                    <field name="ref" string="ÿ±ŸÇŸÖ ÿßŸÑŸÖÿ≠ŸÑÿ©"/>
                </div>
            </xpath>
            <xpath expr="//div[@class='o_row o_row_readonly'][field[@name='ref']]" position="after">
                <label for="pole" class="oe_inline"/>
                <div class="o_row o_row_readonly">
                    <field name="pole" string="ÿßŸÑÿπŸÖŸàÿØ"/>
                    <field name="number_of_expired_days" string="ÿßŸÑÿπŸÖŸàÿØ" invisible='1'/>
                </div>
            </xpath>
            <xpath expr="//field[@name='number_of_expired_days']" position="after">
                <label for="user_name" class="oe_inline"/>
                <div class="o_row o_row_readonly">
                    <field name="user_name" string="User Name"/>
                </div>
            </xpath>

            <xpath expr="//field[@name='phone']" position="attributes">
                <attribute name="placeholder">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ÿßŸÑÿ£ŸàŸÑ</attribute>
            </xpath>

            <xpath expr="//field[@name='mobile']" position="attributes">
                <attribute name="placeholder">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ÿßŸÑÿ´ÿßŸÜŸä</attribute>
            </xpath>

            <xpath expr="//field[@name='name']" position="attributes">
                <attribute name="placeholder">ÿßŸÑÿßÿ≥ŸÖ ÿ±ÿ®ÿßÿπŸä ŸàÿßŸÑŸÑŸÇÿ®</attribute>
            </xpath>

            <xpath expr="//field[@name='partner_longitude']" position="attributes">
                <attribute name="placeholder">ÿßÿ≠ÿØÿßÿ´Ÿäÿßÿ™ ÿßŸÑÿ∑ŸàŸÑ</attribute>
            </xpath>

            <xpath expr="//field[@name='partner_latitude']" position="attributes">
                <attribute name="placeholder">ÿßÿ≠ÿØÿßÿ´Ÿäÿßÿ™ ÿßŸÑÿπÿ±ÿ∂</attribute>
            </xpath>         
        
            <xpath expr="//sheet//div[@name='button_box']" position="inside">
                <!-- Open Google Maps (only when coords exist) -->
                <button type="object"
                        name="action_open_google_maps"
                        class="oe_stat_button"
                        icon="fa-map-marker"
                        invisible="(not partner_latitude) or (not partner_longitude)">
                    <div class="o_stat_info">
                        <span class="o_stat_text">ÿπÿ±ÿ∂ ŸÖŸàŸÇÿπ ÿßŸÑÿ≤ÿ®ŸàŸÜ</span>
                    </div>
                </button>

                <!-- Open the get-location wizard -->
                <button type="object"
                        name="action_open_current_location_wizard"
                        class="oe_stat_button"
                        icon="fa-crosshairs">
                    <div class="o_stat_info">
                        <span class="o_stat_text">ÿ¨ŸÑÿ® ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä</span>
                    </div>
                </button>
            </xpath>
            
            <!-- Hide city, state, country -->
            <field name="city" invisible='1'/>
            <field name="state_id" invisible='1'/>
            <xpath expr="//field[@name='city']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='state_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='country_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
            <!-- Hide original comment field to move it -->
            <xpath expr="//field[@name='comment']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
        </field>
    </record>

    <!-- Add area fields to tree view -->
    <record id="view_partner_tree_area_fields" model="ir.ui.view">
        <field name="name">res.partner.tree.area.fields</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='city']" position="after">
                <field name="area_name_id" optional="hide" string="ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©"/>
                <field name="area_number_id" optional="hide" string="ÿ±ŸÇŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©"/>
                <field name="area_name" optional="hide" string="ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© (ŸÜÿµ)"/>
                <field name="area_number" optional="hide" string="ÿ±ŸÇŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© (ŸÜÿµ)"/>
                <field name="partner_latitude" invisible='1' />
                <field name="partner_longitude" invisible='1'/>

                <field name="google_maps_url" 
                    string="üìç ÿÆÿ±ÿßÿ¶ÿ∑"
                    widget="url" 
                    optional="show"
                    invisible="not partner_latitude or not partner_longitude"/>
            </xpath>
        </field>
    </record>

    <!-- Add search filters for area fields -->
    <record id="view_partner_search_area_fields" model="ir.ui.view">
        <field name="name">res.partner.search.area.fields</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='category_id']" position="after">
                <field name="area_name_id" string="ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©"/>
                <field name="area_number_id" string="ÿ±ŸÇŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©"/>
            </xpath>
            <xpath expr="//filter[@name='customer']" position="after">
                <separator/>
                <filter string="ÿ≠ÿ≥ÿ® ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©" name="group_by_area_name" 
                        context="{'group_by': 'area_name_id'}"/>
                <filter string="ÿ≠ÿ≥ÿ® ÿ±ŸÇŸÖ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©" name="group_by_area_number" 
                        context="{'group_by': 'area_number_id'}"/>
            </xpath>
        </field>
    </record>

</odoo>