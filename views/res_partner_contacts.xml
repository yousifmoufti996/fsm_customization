<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Inherit Contact form view to add area fields -->
    <record id="view_partner_form_area_fields" model="ir.ui.view">
        <field name="name">res.partner.form.area.fields</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">

            <!-- Add these to hide the old fields -->
            <xpath expr="//field[@name='area_name']" position="replace"/>
            <xpath expr="//field[@name='area_name_id']" position="replace"/>
            <xpath expr="//field[@name='area_number_id']" position="replace"/>
            <xpath expr="//field[@name='nearest_point']" position="replace"/>
            <xpath expr="//field[@name='longitude_coordinates']" position="replace"/>
            <xpath expr="//field[@name='latitude_coordinates']" position="replace"/>
            <xpath expr="//field[@name='full_name_and_surname']" position="replace"/>
            <xpath expr="//field[@name='first_phone_number']" position="replace"/>
            <xpath expr="//field[@name='second_phone_number']" position="replace"/>
            <xpath expr="//field[@name='email1']" position="replace"/>
            <xpath expr="//field[@name='subscription_type']" position="replace"/>

            <!-- Hide these fields from the old tab (we'll move them to new tab) -->
            <xpath expr="//field[@name='menu_type_ids']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
            <xpath expr="//field[@name='local_number']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
            <xpath expr="//field[@name='user_name']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
            <xpath expr="//field[@name='Cabin']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='pole']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='subscription_type_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='menu_type_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//notebook" position="before"> 
                <group string="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©" col="2">
                    <group string="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©" >
                        <field name="menu_type_ids" string="Ù…Ø¬Ù…ÙˆØ¹ Ø¹Ù…Ù„Ø§Ø¡ ÙØ±Ø¹ÙŠØ©" widget="many2many_tags" readonly="0"/>
                        <field name="category_id" string="Ù†ÙˆØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ" widget="many2many_tags"/>
                    </group>
                    <group>
                        <field name="ref" string="Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„Ø©"/>
                        <field name="user_name" string="User Name"/>
                        <!-- <field name="family_number" string="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„ÙŠ"/> -->
                        <field name="pole" string="Ø§Ù„Ø¹Ù…ÙˆØ¯"/>
                    </group>
                </group>
            </xpath>

            
            
            <!-- <xpath expr="//field[@name='subscribtion_type_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
             -->
            <!-- Replace city field and add area fields -->
            <!-- <xpath expr="//field[@name='city']" position="replace">
                <field name="area_name_id" string="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©" 
                       options="{'no_create': True, 'no_create_edit': True}"/>
                <field name="area_number_id" string="Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"
                       domain="[('area_name_id', '=', area_name_id)]"
                       options="{'no_create': True, 'no_create_edit': True}"/>
                <field name="city" invisible="1"/>
            </xpath> -->

          <xpath expr="//sheet//div[@name='button_box']" position="inside">
    <!-- Open Google Maps (only when coords exist) -->
    <button type="object"
            name="action_open_google_maps"
            class="oe_stat_button"
            icon="fa-map-marker"
            invisible="(not partner_latitude) or (not partner_longitude)"

            >
        <div class="o_stat_info">
            <span class="o_stat_text">Ø¹Ø±Ø¶ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø²Ø¨ÙˆÙ†</span>
        </div>
    </button>

    <!-- Open the get-location wizard -->
    <button type="object"
            name="action_open_current_location_wizard"
            class="oe_stat_button"
            icon="fa-crosshairs">
        <div class="o_stat_info">
            <span class="o_stat_text">Ø¬Ù„Ø¨ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
        </div>
    </button>
</xpath>


            <!-- <xpath expr="//field[@name='notes']" position="before">
                
                <button name="action_open_current_location_wizard" 
                    type="object" 
                    string="ðŸŽ¯ Ø§Ù„Ø­ØµÙˆÙ„ggggg Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ"
                    class="btn-primary"
                    style="margin-top: 10px;"/>
                    
            </xpath>
 -->

            <!-- <xpath expr="//div[@name='button_box']" position="inside">
                <button name="action_get_current_location" 
                        type="object" 
                        class="oe_stat_button" 
                        icon="fa-crosshairs">
                        <div class="text-center">
                            <button type="button" 
                                    name="get_location_btn"
                                    onclick="getCurrentLocation()" 
                                    class="btn btn-primary">
                                ðŸŽ¯ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ
                            </button>
                        </div>
                </button>
            </xpath> -->
                                    
            <!-- Add a new page for sync fields and debugging -->
            <!-- <xpath expr="//notebook" position="inside">
                <page string="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ÙˆØ§Ù„Ù…Ø²Ø§Ù…Ù†Ø©" name="area_sync" 
                      groups="base.group_no_one">
                    <group string="Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø© Ù…Ø¹ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©">
                        <group>
                            <field name="area_name" readonly="1" 
                                   string="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ù…ØªØ²Ø§Ù…Ù†)"
                                   help="Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…ØªØ²Ø§Ù…Ù† Ù…Ø¹ Ø­Ù‚Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ÙÙŠ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©"/>
                            <field name="area_number" readonly="1" 
                                   string="Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ù…ØªØ²Ø§Ù…Ù†)"
                                   help="Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…ØªØ²Ø§Ù…Ù† Ù…Ø¹ Ø­Ù‚Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ÙÙŠ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©"/>
                        </group>
                        <group>
                            <field name="city" string="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ù…ØªØ²Ø§Ù…Ù†Ø© Ù…Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©)"
                                   help="Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…ØªØ²Ø§Ù…Ù† Ù…Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©"/>
                        </group>
                    </group>
                </page>
            </xpath> -->
            
        </field>
    </record>

    <!-- Add area fields to tree view -->
    <record id="view_partner_tree_area_fields" model="ir.ui.view">
        <field name="name">res.partner.tree.area.fields</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='city']" position="after">
                <field name="area_name_id" optional="hide" string="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"/>
                <field name="area_number_id" optional="hide" string="Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"/>
                <field name="area_name" optional="hide" string="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ù†Øµ)"/>
                <field name="area_number" optional="hide" string="Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ù†Øµ)"/>
                <field name="partner_latitude" invisible='1' />
                <field name="partner_longitude" invisible='1'/>

          

                <field name="google_maps_url" 
                    string="ðŸ“ Ø®Ø±Ø§Ø¦Ø·"
                    widget="url" 
                    optional="show"
                    invisible="not partner_latitude or not partner_longitude"/>
            </xpath>
        </field>
    </record>

    <!-- Add search filters for area fields -->
    <record id="view_partner_search_area_fields" model="ir.ui.view">
        <field name="name">res.partner.search.area.fields</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='category_id']" position="after">
                <field name="area_name_id" string="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"/>
                <field name="area_number_id" string="Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"/>
            </xpath>
            <xpath expr="//filter[@name='customer']" position="after">
                <separator/>
                <filter string="Ø­Ø³Ø¨ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©" name="group_by_area_name" 
                        context="{'group_by': 'area_name_id'}"/>
                <filter string="Ø­Ø³Ø¨ Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©" name="group_by_area_number" 
                        context="{'group_by': 'area_number_id'}"/>
            </xpath>
        </field>
    </record>

</odoo>